# Docker 

Команда для сборки докер контейнера
```sh
  docker-compose up -d
```

Run all tests
```sh
  docker-compose -f docker-compose-test.yaml up --build
```

# Scheduler 

Цеха: 
- Моцарелла
  - Бонус: упаковка терки (работает тогда, когда нет линии воды и есть план варок во вкладке "терка" в файле плана варок)
- Рикотта
- Маскарпоне 
- Масло
- Милкпроджект: по факту адыгейский и брынза (от милкпроджекта осталось только название)

В каждом цеху есть набор одинаковых функций построения расписания

Псевдокод
- to_boiling_plan(str: boiling_plan_filename) -> pd.DataFrame: считывает файл плана варок в датафрейм. Может читать и файл расписания, т.к. там там обычно есть лист с планом варок 
- make_schedule(str: boiling_plan_filename) -> Block: строит расписание в виде блока
- wrap_frontend(str: boiling_plan_filename) -> Block: оборачивает расписание в виде блока в новый блок фронтенда (который уже будет рисоваться)
- draw_frontend(str: boiling_plan_filename, STYLE: dict) -> None: отрисовывает результат функции wrap_frontend расписание в excel файле
Вот эти функции кумулятивные (каждая следующая по факту сначала вызывает предыдущую, а потом делает что-то свое)

Есть библиотека utils_ak.block, с помощью которой строятся блоки расписания с разными правилами внутри. Примеры использования либы можно найти в block_maker.py (там есть примеры-тесты)

Есть несколько способов получать детей блоков: 
- parent['child_class']: возвращает ребенка с классом child_class, если он один и список всех детей, если их несколько 
- parent['child_class', True]: возвращает список детей, даже если есть только один
- parent.iter(condition): итератор по всем узлам блока удовлетворяющим условию condition

Функции вставки блоков (используются в методах класса `BlockMaker.block`, `BlockMaker.row`, `BlockMaker.col`) 
- add_push: просто вставка без валидатора
- simple_push: просто вставка, можно указать валидатор
- stack_push: вставляем блоки "по очереди" 
- AxisPusher(): вставляем блоки "по оси" (по времени) с валидатором. Точка отсчета (можно задать в параметрах). Он пробует вставить блок. Получилось - отлично. Не получилось - значит кто-то мешает. Более того, валидаторы в тексте ошибки возвращают насколько мешается. Он прибавляет это число и пробует вставлять вставлять дальше с новой координатой. Зациклиться не может, зарейзит ошибку.

Конвертация времени: 
- cast_time(five_minutes_count: int) -> str (10 -> '00:50')
- cast_t(time: str) -> int (five_minutes_count) ('00:50' -> 10)

# Модели 

... 