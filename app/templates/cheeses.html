{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}Cheese - Cheese{% endblock %}

{% block page_content %}
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">


<script type="text/javascript">
	$(function(){
	    $(".delete-cheese").click( function(){
	        var id = $(this).attr("data-id");
            $(".btn.btn-danger.btn-ok").click(function(){
                $.ajax(
                {
                    url: '/delete_cheese/' + id,
                    type: 'DELETE',
                    success: function(res)
                    {
                        console.log(res)
                    },
                    error: function(error) {
                          console.log(error);
                    }
                });
            });
        });
	});
</script>

</head>
<body>

<div class="table-title">
    <div class="row">
        <div class="col-sm-6">
            <h2>All types of cheeses</b></h2>
        </div>
        <div class="col-sm-8">
            <a href="/add_cheese" class="btn btn-success" data-toggle="modal"><i class="material-icons">&#xE147;</i> <span>Add new cheese</span></a>
        </div>
    </div>
</div>

<br>
<br>
<br>

<table class="table table-hover table-hover">
    <thead>
        <tr>
            <th>Cheese name</th>
            <th>Leaven time</th>
            <th>Solidification time</th>
            <th>Cutting time</th>
            <th>Draining time</th>
            <th>Cheese maker name</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <ul>
            {% for cheese in cheeses %}
                <tr>
                    <td>{{cheese.cheese_name}} </td>
                    <td>{{cheese.leaven_time}}</td>
                    <td>{{cheese.solidification_time}}</td>
                    <td>{{cheese.cutting_time}}</td>
                    <td>{{cheese.draining_time}}</td>
                    <td>{{cheese.cheese_maker.cheese_maker_name}}</td>
                    <td>
                        <a href="/edit_cheese/{{cheese.id}}" class="download-model" data-toggle="model">
                            <i class="material-icons" data-toggle="tooltip" title="Edit">
                                edit
                            </i>
                        </a>
                        <a href="#deleteCheese" class="delete-cheese" data-id={{cheese["id"]}} data-toggle="modal">
                            <i class="material-icons" data-toggle="tooltip" style="color:red" title="Delete">
                                &#xE872;
                            </i>
                        </a>
                        <div id="deleteCheese" class="modal fade" >
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <form>
                                        <div class="modal-header">
                                            <h4 class="modal-title">Delete cheese</h4>
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                        </div>
                                        <div class="modal-body">
                                            <p>Are you sure you want to delete cheese?</p>
                                            <p class="text-warning"><small>This action cannot be undone.</small></p>
                                        </div>
                                        <div class="modal-footer">
                                            <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                                            <input type="submit" class="btn btn-danger btn-ok" value= Delete>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </ul>
    </tbody>
</table>
<div class="pagination">
    {{ macros.pagination_widget(pagination, endpoint) }}
</div>
</body>

{% endblock %}
